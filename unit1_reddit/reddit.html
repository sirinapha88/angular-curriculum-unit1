<!DOCTYPE html>
<html ng-app='myApp'>
<head>
	<meta charset="utf-8">
	<title>Reddit Clone</title>
	<script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.4/angular.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" media="screen">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type='text/javascript' src= 'app.js'></script>
</head>
<body ng-controller="redditController">
	<div class="container">
		<ul class="nav nav-tabs"> 
  			<li role="presentation" class="active"><a href="#">Reddit Clone</a></li>	
  			<li role="presentation">
  				<a href="#" ng-click="showTheForm = !showTheForm">
  				<span class="glyphicon glyphicon-plus"></span>Submit Post</a>  
  			</li>
  			<form class="navbar-form navbar-left" role="search">
		        <div class="form-group">
		          <input type="text" class="form-control" placeholder="Search">
		        </div>
		    </form>
			 
    		<li class="dropdown">
          		<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"><span>Sort by Votes</span> <span class="caret"></span></a>
          		<ul class="dropdown-menu">
	            	<li><a href="#">Sort by Votes</a></li>
		            <li><a href="#">Sort by Date</a></li>
		            <li><a href="#">Sort by Title</a></li>
          		</ul>
        	</li>
		</ul>

		<div>
			<form ng-show="showTheForm" name="userForm" ng-submit="submitForm(userForm.$valid)" novalidate>
  					<div class="form-group" ng-class="{ 'has-error' : userForm.title.$invalid && !userForm.title.$pristine ,'has-success' : userForm.title.$valid }">
					    <label class="control-label" for="title">Title:</label>
					    <input autofocus type="text" name="title" class="form-control" ng-model="newPost.title" ng-required="true" id="title" ng-minlength="3" ng-maxlength="20" >
					    <p ng-show="userForm.title.$error.minlength" class="help-block">title is too short.</p>
					    <p ng-show="userForm.title.$error.maxlength" class="help-block">title is too long.</p>
					</div>

						<div class="form-group" ng-class="{ 'has-error' : userForm.author.$invalid && !userForm.author.$pristine ,'has-success' : userForm.author.$valid }">
					    <label class="control-label" for="author">Author</label>
					    <input type="text" name="author" class="form-control" ng-model="newPost.author" id="author" ng-minlength="3" ng-maxlength="25" ng-required="true">
					    <p ng-show="userForm.author.$error.minlength" class="help-block">author is too short.</p>
					    <p ng-show="userForm.author.$error.maxlength" class="help-block">author is too long.</p>
					</div>

					<div class="form-group" ng-class="{ 'has-error' : userForm.imgURL.$invalid && !userForm.imgURL.$pristine ,'has-success' : userForm.imgURL.$valid }">
					    <label class="control-label" for="imgURL">Image URL</label>
					    <input type="text" id="imgURL" name="imgURL" class="form-control" ng-required="true" ng-model="newPost.imgURL">
					    <p ng-show="userForm.imgURL.$invalid && !userForm.imgURL.$pristine" class="help-block">Enter a valid imgURL.</p>
					</div>

					<div class="form-group" ng-class="{ 'has-error' : userForm.desc.$invalid && !userForm.desc.$pristine ,'has-success' : userForm.desc.$valid }">
					    <label class="control-label" for="desc">Description</label>
					    <input type="text" id="desc" name="desc" class="form-control" ng-required="true" ng-model="newPost.desc">
					    <p ng-show="userForm.desc.$invalid && !userForm.desc.$pristine" class="help-block">Enter a valid desc.</p>
					</div>
								  	
				    <button>Submit</button>
				</form>
		</div>

		<div ng-repeat="item in view.posts">
			
	  		<img ng-src="{{item.imgURL}}">
	  		<h3>{{item.title}}</h3> |
	  		<span class="glyphicon glyphicon-arrow-up" ng-click="updateVotes(1)"></span> 
          	<span class="glyphicon glyphicon-arrow-down" ng-click="updateVotes(1)"></span>
          	<span ng-class="upvoteClass(post)">{{ item.votes }}</span>

	  		<h4>By {{item.author}}</h4>
	  		<p>{{item.desc}}</p>
	  		<span class="glyphicon glyphicon-calendar"></span>{{date}} | 
	  		<span class="hoverable" ng-click="toggleCommentVisibility(post)"> 

    		<span class="glyphicon glyphicon-comment"></span>
   			<ng-pluralize count="item.comments.length" when="{1: '1 comment', 'other': '{{ item.comments.length }} comments'}"></ng-pluralize>
	  		
	  		<span class="hoverable" ng-click="showTheForm = !showTheForm" ng-show="visible"> |
	            <span class="glyphicon glyphicon-pencil" ></span>
	            Add comment
          		</span>
          	</span>
          	
          	<div>
          		<form class="form-inline" ng-submit="addComment(item,newComment)" ng-show="showTheForm">
	          		<div class="form-group">
		              	<label for="author">Author</label>
		              	<input type="text" placeholder="author" class="form-control" ng-model="newComment.author">
	            	</div>
	            	<div class="form-group">
		              <label for="text">Text</label>
		              <input type="text" placeholder="text" class="form-control" ng-model="newComment.text">
	            	</div>
	            	<input class="btn btn-success" type="submit" value="Add Comment">
	          	</form>
          	</div>
		</div>
		
	</div>

</body>
</html>